<head>
<title>3-DOF Crane Jib Equations.html</title>
<!-- Created by Maple 9.03, IBM INTEL NT -->
</head>
<body bgcolor="FFFFFF">
<basefont size="3">
<a name="MapleAutoBookmark1" />
<p align="center">
<b><u><font color="#000000" size="6">Dynamic Equations for the 3-DOF Crane Jib System</font></u></b>
</p>
<p align="center">
<i><font color="#000000">©</font></i>
<i><font color="#000000">&nbsp;2006 Quanser Consulting Inc.</font></i>
</p>
<p align="center">
<font color="#000000">URL: </font>
<a href="http://www.quanser.com" target="_top">http://www.quanser.com</a></p>
<p align="center">
<font color="#000000" size="2">NOTE: This worksheet presents the dynamic equations modelling the jib on the 3D crane system.</font>
</p>
<p align="center"><a name="Description" />
</p>
<dl><a name="MapleAutoBookmark2" />
<p align="left">
<b><font color="#000000" size="5">Description</font></b>
</p>
<ul><li>
<font color="#000000">This worksheet presents the dynamic equations modelling a single pendulum gantry mounted on a linear cart or trolley.</font>
</li>
<li>
<font color="#000000">Specifically, this worksheet is used to derive the state-space matrices for the </font>
<b><font color="#000000">Jib </font></b>
<font color="#000000">system on Quanser's </font>
<b><font color="#000000">3D Crane </font></b>
<font color="#000000">experiment</font>
</li>
<li>
<font color="#000000">The system has 2-Degrees-Of-Freedom (DOF) for motions in a two-dimensional plane.</font>
</li>
<li>
<font color="#000000">The Lagrange's method is used to obtain the dynamic model of the system.</font>
</li>
<dl><a name="MapleAutoBookmark3" />
</ul>
<p align="left">
<b><font color="#000000" size="4">The </font></b>
<i><b><font color="#000000" size="4">Quanser_Tools</font></b></i>
<b><font color="#000000" size="4">&nbsp;Package</font></b>
</p>
<ul><li>
<font color="#000000">The </font>
<i><font color="#000000">Quanser_Tools</font></i>
<font color="#000000">&nbsp;module defines generic procedures and data in relation to determining the state-space representation of all the Quanser experiments. Specifically, this means deriving and solving the Lagrange's equations of the Quanser systems.</font>
</li>
<li>
<font color="#000000">The </font>
<i><font color="#000000">quanser</font></i>
<font color="#000000">&nbsp;repository containing the </font>
<i><font color="#000000">Quanser_Tools</font></i>
<font color="#000000">&nbsp;package is implemented in the 2 following files: </font>
<i><font color="#000000">quanser.ind</font></i>
<font color="#000000">&nbsp;and </font>
<i><font color="#000000">quanser.lib.</font></i>
<font color="#000000">&nbsp;If these two files are not readily available, they can be generated by executing the Maple worksheet titled: </font>
<i><font color="#000000">quanser_tools.mws</font></i>
<font color="#000000">.</font>
</li>
<li>
<b><font color="#000000">To install</font></b>
<font color="#000000">&nbsp;the </font>
<i><font color="#000000">Quanser_Tools</font></i>
<font color="#000000">&nbsp;package, copy the two files </font>
<i><font color="#000000">quanser.ind</font></i>
<font color="#000000">&nbsp;and </font>
<i><font color="#000000">quanser.lib</font></i>
<font color="#000000">&nbsp;&nbsp;into a directory of your choice, like for example: "C:\Program Files\Quanser\Maple Repository". </font>
</li>
<li>
<b><font color="#000000">To use</font></b>
<font color="#000000">&nbsp;the </font>
<i><font color="#000000">Quanser_Tools</font></i>
<font color="#000000">&nbsp;package in a Maple worksheet, add the path to its disk location to the Maple global variable </font>
<i><font color="#000000">libname</font></i>
<font color="#000000">. For example, this can be achieved by the following Maple command: <br />
libname := </font>
<i><font color="#000000">&nbsp;"C:/Program Files/Quanser/Maple Repository", libname:</font></i>
</li>
</dl><dl><a name="MapleAutoBookmark4" />
</ul>
<p align="left">
<b><font color="#000000" size="4">References</font></b>
</p>
<ul><li>
<font color="#000000">For additional control challenges offered by the Quanser please visit our website at: </font>
<a href="http://www.quanser.com/" target="_top">www.quanser.com</a></li>
</dl></dl><dl><a name="MapleAutoBookmark5" />
</ul>
<p align="left">
<b><font color="#000000" size="5">Worksheet Initialization</font></b>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">restart: interface( imaginaryunit = j ): </font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">with( LinearAlgebra ):</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">libname := "C:/Program Files/Quanser/Maple Repository", ".", libname:</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">with( Quanser_Tools );</font></b>
</td></tr>
</table>
</p>
<p align="left">
<img src="images/3-DOF Crane Jib Equations1.gif" width="659" height="20" alt="[HTM, deriveA, deriveB, deriveF, kinetic_energy, lagrange_equations, moment_of_inertia, n_norm, potential_energy, write_ABCD_to_Mfile]" />
<br />
<img src="images/3-DOF Crane Jib Equations2.gif" width="283" height="20" alt="[HTM, deriveA, deriveB, deriveF, kinetic_energy, lagrange_equations, moment_of_inertia, n_norm, potential_energy, write_ABCD_to_Mfile]" />
</p>
<p align="left">
<font color="#000000">environment variable representing the order of series calculations</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">Order := 2:</font></b>
</td></tr>
</table>
</p>
</dl><dl><a name="MapleAutoBookmark6" />
<p align="left"><a name="Notations" />
<b><font color="#000000" size="5">Notations</font></b>
</p>
<dl><a name="MapleAutoBookmark7" />
<p align="left">
<b><font color="#000000" size="4">Generalized Coordinates: </font></b>
<img src="images/3-DOF Crane Jib Equations3.gif" width="29" height="36" alt="q[i]" align="middle" />
<b><font color="#000000" size="4">'s</font></b>
</p>
<p align="left">
<font color="#000000">The generalized coordinates are also called Lagrangian coordinates.</font>
</p>
<p align="left">
<img src="images/3-DOF Crane Jib Equations4.gif" width="48" height="32" alt="x[j](t)" align="middle" />
<font color="#000000">&nbsp;= &nbsp;linear position of the trolley on the 3D crane system</font>
</p>
<p align="left">
<img src="images/3-DOF Crane Jib Equations5.gif" width="42" height="32" alt="gamma(t)" align="middle" />
<font color="#000000">&nbsp;= gimble </font>
<img src="images/3-DOF Crane Jib Equations6.gif" width="23" height="32" alt="gamma" align="middle" />
<font color="#000000">&nbsp;deflection angle of payload about the vertical: the zero angle [mod 2*pi] is defined when the load is suspended in the perfect downward position.</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">q := [ x[j](t), gamma(t) ];</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/3-DOF Crane Jib Equations7.gif" width="124" height="27" alt="q := [x[I](t), gamma(t)]" />
</p>
<p align="left">
<font color="#000000">Nq = number of Lagrangian coordinates (e.g. here, it is Nq = 2)</font>
</p>
<p align="left">
<font color="#000000">Nq is also the number of position states.</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">Nq := nops( q ):</font></b>
</td></tr>
</table>
</p>
<p align="left">
<font color="#000000">qd = first-order time derivative of the generalized coordinates, e.g. position and angular velocities</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">qd := map( diff, q, t );</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/3-DOF Crane Jib Equations8.gif" width="168" height="45" alt="qd := [diff(x[I](t),t), diff(gamma(t),t)]" />
</p>
</dl><p align="left">
</p>
<dl><a name="MapleAutoBookmark8" />
<p align="left">
<b><font color="#000000" size="4">Cartesian Coordinates of the Pendulum's Centre Of Gravity </font></b>
</p>
<p align="left">
<font color="#000000">conventions:</font>
</p>
<p align="left">
<font color="#000000">1) </font>
<img src="images/3-DOF Crane Jib Equations9.gif" width="71" height="58" alt="0 &lt; diff(x[j],t)" align="middle" />
<font color="#000000">&nbsp;when facing cart it goes to the right towards the end of the jib.</font>
</p>
<p align="left">
<font color="#000000">2) </font>
<img src="images/3-DOF Crane Jib Equations10.gif" width="48" height="32" alt="gamma = 0" align="middle" />
<font color="#000000">&nbsp;corresponds to pendulum perfectly vertical, pointing downwards.</font>
</p>
<p align="left">
<font color="#000000">3) positive rotation is CW when facing the cart.</font>
</p>
<p align="left">
<img src="images/3-DOF Crane Jib Equations11.gif" width="32" height="32" alt="x[p]" align="middle" />
<font color="#000000">&nbsp;= x-coordinate of the payload in absolute Cartesian position</font>
</p>
<p align="left">
<img src="images/3-DOF Crane Jib Equations12.gif" width="31" height="32" alt="y[p]" align="middle" />
<font color="#000000">&nbsp;= y-coordinate of the payload in absolute Cartesian position</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">x[p] := q[1] - l[p] * sin( q[2] );<br />
y[p] := -l[p] * cos( q[2] );<br />
</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/3-DOF Crane Jib Equations13.gif" width="173" height="27" alt="x[p] := x[I](t)-l[p]*sin(gamma(t))" />
</p>
<p align="center">
<img src="images/3-DOF Crane Jib Equations14.gif" width="137" height="27" alt="y[p] := -l[p]*cos(gamma(t))" />
</p>
<p align="left">
<img src="images/3-DOF Crane Jib Equations15.gif" width="40" height="32" alt="xd[p]" align="middle" />
<font color="#000000">&nbsp;= x-coordinate of the SPG's COG absolute Cartesian velocity</font>
</p>
<p align="left">
<img src="images/3-DOF Crane Jib Equations16.gif" width="39" height="32" alt="yd[p]" align="middle" />
<font color="#000000">&nbsp;= y-coordinate of the SPG's COG absolute Cartesian velocity</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">xd[p] := diff( x[p], t );<br />
yd[p] := diff( y[p], t );</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/3-DOF Crane Jib Equations17.gif" width="282" height="45" alt="xd[p] := diff(x[I](t),t)-l[p]*cos(gamma(t))*diff(gamma(t),t)" />
</p>
<p align="center">
<img src="images/3-DOF Crane Jib Equations18.gif" width="194" height="45" alt="yd[p] := l[p]*sin(gamma(t))*diff(gamma(t),t)" />
</p>
</dl><dl><a name="MapleAutoBookmark9" />
<p align="left">
<b><font color="#000000" size="4">State-Space Variables</font></b>
</p>
<ul><li>
<font color="#000000">The chosen states should at least include the generalized coordinates and their first-time derivatives.</font>
</li>
<li>
<font color="#000000">X is the state vector.</font>
</li>
<li>
<font color="#000000">In the state vector X: Lagrangian coordinates are first, followed by their first-time derivatives, and finally any other states, as required.</font>
</li>
</ul>
<p align="left">
<font color="#000000">Substitution sets for the states (to obtain time-independent state equations).</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">subs_Xq := { seq( q[i] = X[i], i=1..Nq ) };<br />
subs_Xqd := { seq( qd[i] = X[i+Nq], i=1..Nq ) };</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/3-DOF Crane Jib Equations19.gif" width="245" height="27" alt="subs_Xq := {x[I](t) = X[1], gamma(t) = X[2]}" />
</p>
<p align="center">
<img src="images/3-DOF Crane Jib Equations20.gif" width="287" height="45" alt="subs_Xqd := {diff(x[I](t),t) = X[3], diff(gamma(t),t) = X[4]}" />
</p>
<p align="left">
<font color="#000000">Substitution set for the input(s): </font>
</p>
<p align="left">
<font color="#000000">set the input to be the current applied to the jib motor</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">subs_U := { I[m,j] = U[1] };</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/3-DOF Crane Jib Equations21.gif" width="170" height="27" alt="subs_U := {I[m,I] = U[1]}" />
</p>
<p align="left">
<font color="#000000">set the input to be the cart's driving force: </font>
<img src="images/3-DOF Crane Jib Equations22.gif" width="33" height="32" alt="F[c]" align="middle" />
<font color="#000000">&nbsp;(if not expressed as a function of the motor current)</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">#subs_U := { F[c] = U[1] }:</font></b>
</td></tr>
</table>
</p>
<p align="left">
<font color="#000000">Nu = number of inputs; U = input (row) vector (e.g. U = [ I[m] ] )</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">Nu := nops( subs_U ):</font></b>
</td></tr>
</table>
</p>
<p align="left">
<font color="#000000">substitution set for the position states' second time derivatives</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">subs_Xqdd := { seq( diff( q[i], t$2 ) = &nbsp;Xd[i+Nq], i=1..Nq ) };</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/3-DOF Crane Jib Equations23.gif" width="330" height="63" alt="subs_Xqdd := {diff(x[I](t),`$`(t,2)) = Xd[3], diff(gamma(t),`$`(t,2)) = Xd[4]}" />
</p>
<p align="left">
<font color="#000000">second time derivatives of the position states (written as time-independent variables).</font>
</p>
<p align="left">
<font color="#000000">The set of unknowns is obtained from this list to solve the Lagrange's equations of motion.</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">Xqdd := [ seq( Xd[i+Nq], i=1..Nq ) ];</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/3-DOF Crane Jib Equations24.gif" width="144" height="27" alt="Xqdd := [Xd[3], Xd[4]]" />
</p>
<p align="left">
<font color="#000000">substitution set to linearize the state-space matrices (i.e. A and B) </font>
</p>
<p align="left">
<font color="#000000">about the quiescent null state vector (small-displacement theory)</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">subs_XUzero := { seq( X[i] = 0, i=1..2*Nq ), seq( U[i] = 0, i=1..Nu ) }:</font></b>
</td></tr>
</table>
</p>
<p align="left">
<font color="#000000">Nx = dim( X ) = total number of states (should be greater than or equal to: 2 * Nq)</font>
</p>
<p align="left">
<font color="#000000">Ny = chosen number of outputs</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">Nx := 2 * Nq + 0:<br />
Ny := Nq:</font></b>
</td></tr>
</table>
</p>
</dl></dl><dl><a name="MapleAutoBookmark10" />
<p align="left">
<b><font color="#000000" size="5">Total Potential and Kinetic Energies of the System</font></b>
</p>
<p align="left">
<font color="#000000">The total potential and kinetic energies are needed to calculate the Lagragian of the system.</font>
</p>
<dl><a name="MapleAutoBookmark11" />
<p align="left">
<b><font color="#000000" size="4">Total Potential Energy: </font></b>
<img src="images/3-DOF Crane Jib Equations25.gif" width="39" height="36" alt="V[T]" align="middle" />
<b><font color="#000000" size="4">&nbsp;</font></b>
</p>
<p align="left">
<font color="#000000">The total potential energy can be expressed in terms of the generalized coordinates alone.</font>
</p>
<p align="left">
<font color="#000000">V[e] = Total Elastic Potential Energy of the system</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">V[e] := 0: </font></b>
</td></tr>
</table>
</p>
<p align="left">
<font color="#000000">V[g] = Total Gravitational Potential Energy of the system.</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">V[g] := potential_energy( 'gravity', m[p], g, y[p] );</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/3-DOF Crane Jib Equations26.gif" width="176" height="27" alt="V[g] := -m[p]*g*l[p]*cos(gamma(t))" />
</p>
<p align="left">
<font color="#000000">V[T] = Total Potential Energy of the system</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">V[T] := simplify( V[g] + V[e] );</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/3-DOF Crane Jib Equations27.gif" width="177" height="27" alt="V[T] := -m[p]*g*l[p]*cos(gamma(t))" />
</p>
<p align="left">
</p>
</dl><dl><a name="MapleAutoBookmark12" />
<p align="left">
<b><font color="#000000" size="4">Total Kinetic Energy: </font></b>
<img src="images/3-DOF Crane Jib Equations28.gif" width="38" height="36" alt="T[T]" align="middle" />
</p>
<p align="left">
<font color="#000000">The total kinetic energy can be expressed in terms of the generalized coordinates and their first-time derivatives.</font>
</p>
<p align="left">
<img src="images/3-DOF Crane Jib Equations29.gif" width="38" height="32" alt="T[t1]" align="middle" />
<font color="#000000">&nbsp;= translational kinetic energy of the motorized trolley </font>
</p>
<p align="left">
<img src="images/3-DOF Crane Jib Equations30.gif" width="69" height="32" alt="m[trolley]" align="middle" />
<font color="#000000">&nbsp;= mass of the trolley</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">Tt[1] := kinetic_energy( 'translation', m[trolley], qd[1] );</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/3-DOF Crane Jib Equations31.gif" width="201" height="58" alt="Tt[1] := 1/2*m[trolley]*diff(x[I](t),t)^2" />
</p>
<p align="left">
<font color="#000000">The cart's directions of translation and rotation are orthogonal.</font>
</p>
<p align="left">
<img src="images/3-DOF Crane Jib Equations32.gif" width="39" height="32" alt="T[r1]" align="middle" />
<font color="#000000">&nbsp;= kinetic energy due to rotation tied to the motorized cart</font>
</p>
<p align="left">
<img src="images/3-DOF Crane Jib Equations33.gif" width="35" height="32" alt="J[psi]" align="middle" />
<font color="#000000">&nbsp;= equivalent moment of inertia acting on the jib motor</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">Tr[1] := kinetic_energy( 'rotation', J[psi], diff(psi[m](t),t));</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/3-DOF Crane Jib Equations34.gif" width="179" height="58" alt="Tr[1] := 1/2*J[psi]*diff(psi[m](t),t)^2" />
</p>
<p align="left">
<font color="#000000">Motor angle and linear distance relationship.</font>
</p>
<p align="left">
<img src="images/3-DOF Crane Jib Equations35.gif" width="48" height="32" alt="K[g,j]" align="middle" />
<font color="#000000">&nbsp;= gear ratio of jib motor</font>
</p>
<p align="left">
<font color="#000000">&nbsp;</font>
<img src="images/3-DOF Crane Jib Equations36.gif" width="73" height="32" alt="r[j,pulley]" align="middle" />
<font color="#000000">&nbsp;= pulley radius</font>
</p>
<p align="left">
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">REL_XJ_TO_PSI := diff(psi[m](t),t) = K[g,j] * qd[1] / r[j,pulley]:<br />
REL_XJ_TO_PSI;</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/3-DOF Crane Jib Equations37.gif" width="198" height="77" alt="diff(psi[m](t),t) = K[g,I]*diff(x[I](t),t)/r[I,pulley]" />
</p>
<p align="left">
<font color="#000000">Redefine rotation kinetic energy such that it is with respect to the trolley linear distance.</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">Tr[1] := subs(REL_XJ_TO_PSI,Tr[1]);</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/3-DOF Crane Jib Equations38.gif" width="217" height="92" alt="Tr[1] := 1/2*J[psi]*K[g,I]^2*diff(x[I](t),t)^2/r[I,pulley]^2" />
</p>
<p align="left">
<font color="#000000">The maximum linear velocity of the trolley is about 0.125 m/s. Using the 3D crane parameters, the : </font>
<img src="images/3-DOF Crane Jib Equations39.gif" width="84" height="76" alt="J[psi]*K[g,j]^2/(r[mp]^2)" align="middle" />
<font color="#000000">&nbsp;&lt; 0.24 kg &lt; </font>
<img src="images/3-DOF Crane Jib Equations40.gif" width="36" height="32" alt="M[c]" align="middle" />
</p>
<p align="left">
<font color="#000000">Hence, the rotational kinetic energy (on the HFLC) can be neglected:</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">#Tr[1] := 0;</font></b>
</td></tr>
</table>
</p>
<p align="left">
<font color="#000000">The pendulum motion is composed of one rotation and one translation, both directions are orthogonal.</font>
</p>
<p align="left">
<font color="#000000">Tr[2] = pendulum rotational kinetic kinergy</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">Tr[2] := kinetic_energy( 'rotation', J[gamma], qd[2] );</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/3-DOF Crane Jib Equations41.gif" width="157" height="58" alt="Tr[2] := 1/2*J[gamma]*diff(gamma(t),t)^2" />
</p>
<p align="left">
<img src="images/3-DOF Crane Jib Equations42.gif" width="40" height="58" alt="diff(gamma,t)" align="middle" />
<font color="#000000">&nbsp;= pendulum absolute angular velocity</font>
</p>
<p align="left">
<font color="#000000">v[p] = pendulum cartesian velocity (magnitude)</font>
</p>
<p align="left">
<font color="#000000">Tt[2] = pendulum translational kinetic kinergy</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">v[p] := n_norm( [ xd[p], yd[p] ], 2 ):<br />
Tt[2] := kinetic_energy( 'translation', m[p], v[p] );</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/3-DOF Crane Jib Equations43.gif" width="536" height="58" alt="Tt[2] := 1/2*m[p]*((diff(x[I](t),t)-l[p]*cos(gamma(t))*diff(gamma(t),t))^2+l[p]^2*sin(gamma(t))^2*diff(gamma(t),t)^2)" />
</p>
<p align="left">
<img src="images/3-DOF Crane Jib Equations44.gif" width="34" height="32" alt="T[T]" align="middle" />
<font color="#000000">&nbsp;= Total Kinetic Energy of the system</font>
</p>
<p align="left">
<font color="#000000">initialization:</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">T[T] := Tt[1] + Tt[2] + Tr[1] + Tr[2]:</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">T[T] := collect( T[T], diff );</font></b>
</td></tr>
</table>
</p>
<p align="left">
<img src="images/3-DOF Crane Jib Equations45.gif" width="611" height="67" alt="T[T] := (1/2*m[trolley]+1/2*m[p]+1/2*J[psi]*K[g,I]^2/r[I,pulley]^2)*diff(x[I](t),t)^2-m[p]*l[p]*cos(gamma(t))*diff(gamma(t),t)*diff(x[I](t),t)+(1/2*m[p]*(l[p]^2*cos(gamma(t))^2+l[p]^2*sin(gamma(t))^2)+..." />
<br />
<img src="images/3-DOF Crane Jib Equations46.gif" width="416" height="58" alt="T[T] := (1/2*m[trolley]+1/2*m[p]+1/2*J[psi]*K[g,I]^2/r[I,pulley]^2)*diff(x[I](t),t)^2-m[p]*l[p]*cos(gamma(t))*diff(gamma(t),t)*diff(x[I](t),t)+(1/2*m[p]*(l[p]^2*cos(gamma(t))^2+l[p]^2*sin(gamma(t))^2)+..." />
</p>
</dl></dl><dl><a name="MapleAutoBookmark13" />
<p align="left">
<b><font color="#000000" size="5">Generalized Forces: </font></b>
<img src="images/3-DOF Crane Jib Equations47.gif" width="38" height="48" alt="Q[i]" align="middle" />
<b><font color="#000000" size="5">'s</font></b>
</p>
<p align="left">
<font color="#000000">The non-conservative forces corresponding to the generalized coordinates are: </font>
<img src="images/3-DOF Crane Jib Equations48.gif" width="33" height="32" alt="F[c]" align="middle" />
<font color="#000000">&nbsp;and the viscous damping forces, where</font>
</p>
<p align="left">
<img src="images/3-DOF Crane Jib Equations49.gif" width="31" height="32" alt="F[j]" align="middle" />
<font color="#000000">&nbsp;= linear force generated by the motorized trolley.</font>
</p>
<p align="left">
<img src="images/3-DOF Crane Jib Equations50.gif" width="32" height="32" alt="B[gamma]" align="middle" />
<font color="#000000">&nbsp;= pendulum viscous friction torque coefficient (a.k.a. viscous damping)</font>
</p>
<p align="left">
<img src="images/3-DOF Crane Jib Equations51.gif" width="37" height="32" alt="B[psi]" align="middle" />
<font color="#000000">&nbsp;= trolley viscous damping force coefficient</font>
</p>
<p align="left">
<font color="#000000">Both viscous dampings are neglected</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">B[psi] := 0: <br />
B[gamma] := 0:</font></b>
</td></tr>
</table>
</p>
<p align="left">
<font color="#000000">Q[i] = generalized force applied on generalized coordinate q[i]<br />
the Coulomb friction is neglected, as well as the force due to the pendulum and acting on the linear cart</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">Q[1] := F[j] - B[psi] * qd[1];</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/3-DOF Crane Jib Equations52.gif" width="70" height="27" alt="Q[1] := F[I]" />
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">Q[2] := - B[gamma] * qd[2];</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/3-DOF Crane Jib Equations53.gif" width="63" height="27" alt="Q[2] := 0" />
</p>
<p align="left">
<img src="images/3-DOF Crane Jib Equations54.gif" width="31" height="32" alt="F[j]" align="middle" />
<font color="#000000">&nbsp;= Linear force produced by the motor at the motor pinion: cart driving force</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">F[j] := eta[g,j] * K[g,j] * eta[m,j] * K[t,j] * I[m,j] / r[j,pulley];</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/3-DOF Crane Jib Equations55.gif" width="228" height="59" alt="F[I] := eta[g,I]*K[g,I]*eta[m,I]*K[t,I]*I[m,I]/r[I,pulley]" />
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">Q := [ seq( Q[i], i=1..Nq ) ];</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/3-DOF Crane Jib Equations56.gif" width="256" height="59" alt="Q := [eta[g,I]*K[g,I]*eta[m,I]*K[t,I]*I[m,I]/r[I,pulley], 0]" />
</p>
</dl><dl><a name="MapleAutoBookmark14" />
<p align="left">
<b><font color="#000000" size="5">Euler-Lagrange's Equations</font></b>
</p>
<p align="left">
<font color="#000000">For a </font>
<i><font color="#000000">N</font></i>
<font color="#000000">-DOF system, the Lagrange's equations can be written:</font>
</p>
<p align="left">
<img src="images/3-DOF Crane Jib Equations57.gif" width="217" height="58" alt="Diff(Diff(L,qdot[i]),t)-Diff(L,q[i]) = Q[i]" align="middle" />
<font color="#000000">&nbsp;&nbsp;for </font>
<img src="images/3-DOF Crane Jib Equations58.gif" width="45" height="32" alt="i = 1" align="middle" />
<font color="#000000">&nbsp;through </font>
<img src="images/3-DOF Crane Jib Equations59.gif" width="27" height="32" alt="N" align="middle" />
</p>
<p align="left">
<font color="#000000">where:</font>
</p>
<p align="left">
<font color="#000000">&nbsp;</font>
<img src="images/3-DOF Crane Jib Equations60.gif" width="31" height="32" alt="Q[i]" align="middle" />
<font color="#000000">'s are special combinations of external forces and called the </font>
<i><font color="#000000">generalized forces,</font></i>
</p>
<p align="left">
<i><font color="#000000">&nbsp;</font></i>
<img src="images/3-DOF Crane Jib Equations61.gif" width="32" height="32" alt="q[1]" align="middle" />
<font color="#000000">, ..., </font>
<img src="images/3-DOF Crane Jib Equations62.gif" width="35" height="32" alt="q[N]" align="middle" />
<font color="#000000">, are </font>
<i><font color="#000000">N </font></i>
<font color="#000000">independent coordinates chosen to describe the system and called the </font>
<i><font color="#000000">generalized coordinates</font></i>
<font color="#000000">,</font>
</p>
<p align="left">
<font color="#000000">&nbsp;and </font>
<img src="images/3-DOF Crane Jib Equations63.gif" width="25" height="32" alt="L" align="middle" />
<font color="#000000">&nbsp;is the </font>
<i><font color="#000000">Lagrangian</font></i>
<font color="#000000">&nbsp;of the system.</font>
</p>
<p align="left">
<img src="images/3-DOF Crane Jib Equations64.gif" width="25" height="32" alt="L" align="middle" />
<font color="#000000">&nbsp;is defined by:</font>
</p>
<p align="left">
<img src="images/3-DOF Crane Jib Equations65.gif" width="80" height="20" alt="L = T-U" />
</p>
<p align="left">
<font color="#000000">where </font>
<img src="images/3-DOF Crane Jib Equations66.gif" width="25" height="32" alt="T" align="middle" />
<font color="#000000">&nbsp;is the total kinetic energy of the system and </font>
<img src="images/3-DOF Crane Jib Equations67.gif" width="28" height="32" alt="U" align="middle" />
<font color="#000000">&nbsp;the total potential energy of the system.</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">EOM_orig := lagrange_equations( T[T], V[T], q, Q ):</font></b>
</td></tr>
</table>
</p>
<p align="left">
<font color="#000000">this is to display the EOM's</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">EOM_orig := collect( EOM_orig, { seq( diff( q[i], t$2 ), i=1..Nq ), seq( diff( q[i], t ), i=1..Nq ), seq( q[i], i=1..Nq ) } );</font></b>
</td></tr>
</table>
</p>
<p align="left">
<img src="images/3-DOF Crane Jib Equations68.gif" width="280" height="97" alt="EOM_orig := [m[p]*l[p]*sin(gamma(t))*diff(gamma(t),t)^2-(-m[trolley]*r[I,pulley]^2-m[p]*r[I,pulley]^2-J[psi]*K[g,I]^2)/r[I,pulley]^2*diff(x[I](t),`$`(t,2))-m[p]*l[p]*cos(gamma(t))*diff(gamma(t),`$`(t,2..." />
<br />
<img src="images/3-DOF Crane Jib Equations69.gif" width="656" height="97" alt="EOM_orig := [m[p]*l[p]*sin(gamma(t))*diff(gamma(t),t)^2-(-m[trolley]*r[I,pulley]^2-m[p]*r[I,pulley]^2-J[psi]*K[g,I]^2)/r[I,pulley]^2*diff(x[I](t),`$`(t,2))-m[p]*l[p]*cos(gamma(t))*diff(gamma(t),`$`(t,2..." />
<br />
<img src="images/3-DOF Crane Jib Equations70.gif" width="197" height="59" alt="EOM_orig := [m[p]*l[p]*sin(gamma(t))*diff(gamma(t),t)^2-(-m[trolley]*r[I,pulley]^2-m[p]*r[I,pulley]^2-J[psi]*K[g,I]^2)/r[I,pulley]^2*diff(x[I](t),`$`(t,2))-m[p]*l[p]*cos(gamma(t))*diff(gamma(t),`$`(t,2..." />
<br />
<img src="images/3-DOF Crane Jib Equations71.gif" width="541" height="97" alt="EOM_orig := [m[p]*l[p]*sin(gamma(t))*diff(gamma(t),t)^2-(-m[trolley]*r[I,pulley]^2-m[p]*r[I,pulley]^2-J[psi]*K[g,I]^2)/r[I,pulley]^2*diff(x[I](t),`$`(t,2))-m[p]*l[p]*cos(gamma(t))*diff(gamma(t),`$`(t,2..." />
</p>
<p align="left">
<font color="#000000">Express the Euler-Lagrange equations of motion as functions of the states:</font>
</p>
<p align="left">
<font color="#000000">1) substitute (i.e. name) the acceleration states first! </font>
</p>
<p align="left">
<font color="#000000">2) then substitute the velocity states!</font>
</p>
<p align="left">
<font color="#000000">3) and only after, the position states, and the inputs!</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">EOM_states := subs( subs_Xqd, subs( subs_Xqdd, EOM_orig ) ):</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">EOM_states := subs( subs_Xq, subs_U, EOM_states );</font></b>
</td></tr>
</table>
</p>
<p align="left">
<img src="images/3-DOF Crane Jib Equations72.gif" width="121" height="63" alt="EOM_states := [m[p]*l[p]*sin(X[2])*X[4]^2-(-m[trolley]*r[I,pulley]^2-m[p]*r[I,pulley]^2-J[psi]*K[g,I]^2)/r[I,pulley]^2*Xd[3]-m[p]*l[p]*cos(X[2])*Xd[4] = eta[g,I]*K[g,I]*eta[m,I]*K[t,I]*U[1]/r[I,pulley]..." />
<br />
<img src="images/3-DOF Crane Jib Equations73.gif" width="660" height="63" alt="EOM_states := [m[p]*l[p]*sin(X[2])*X[4]^2-(-m[trolley]*r[I,pulley]^2-m[p]*r[I,pulley]^2-J[psi]*K[g,I]^2)/r[I,pulley]^2*Xd[3]-m[p]*l[p]*cos(X[2])*Xd[4] = eta[g,I]*K[g,I]*eta[m,I]*K[t,I]*U[1]/r[I,pulley]..." />
<br />
<img src="images/3-DOF Crane Jib Equations74.gif" width="627" height="63" alt="EOM_states := [m[p]*l[p]*sin(X[2])*X[4]^2-(-m[trolley]*r[I,pulley]^2-m[p]*r[I,pulley]^2-J[psi]*K[g,I]^2)/r[I,pulley]^2*Xd[3]-m[p]*l[p]*cos(X[2])*Xd[4] = eta[g,I]*K[g,I]*eta[m,I]*K[t,I]*U[1]/r[I,pulley]..." />
</p>
<dl><a name="MapleAutoBookmark15" />
<p align="left">
<b><font color="#000000" size="4">Linearization &nbsp;in the EOM's</font></b>
<font color="#000000" size="4">&nbsp;</font>
<b><font color="#000000" size="4">of the Trigonometric Functions</font></b>
</p>
<p align="left">
<font color="#000000">Linearization of the equations of motion around the quiescent point of operation (in order to solve them).</font>
</p>
<p align="left">
<font color="#000000">Here, linearization around the zero angles, i.e. for small-amplitude oscillations.</font>
</p>
<p align="left">
<font color="#000000">Linearization around: alpha0 = 0, and alpha_dot0 = 0</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">EOM_ser := EOM_states:</font></b>
</td></tr>
</table>
</p>
<p align="left">
<font color="#000000">Generalized series expansions of the trigonometric functions is used (for small angles).</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">for i from 1 to Nq do<br />
&nbsp;&nbsp;EOM_ser[i] := subsop( 1 = convert( series( op( 1, EOM_ser[i] ), X[2] ), polynom ), EOM_ser[i] );<br />
&nbsp;&nbsp;EOM_ser[i] := simplify( EOM_ser[i] );<br />
end do:</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">EOM_ser;</font></b>
</td></tr>
</table>
</p>
<p align="left">
<img src="images/3-DOF Crane Jib Equations75.gif" width="585" height="59" alt="[(Xd[3]*m[trolley]*r[I,pulley]^2+Xd[3]*m[p]*r[I,pulley]^2+Xd[3]*J[psi]*K[g,I]^2-m[p]*l[p]*Xd[4]*r[I,pulley]^2+m[p]*l[p]*X[4]^2*X[2]*r[I,pulley]^2)/r[I,pulley]^2 = eta[g,I]*K[g,I]*eta[m,I]*K[t,I]*U[1]/r..." />
<br />
<img src="images/3-DOF Crane Jib Equations76.gif" width="482" height="59" alt="[(Xd[3]*m[trolley]*r[I,pulley]^2+Xd[3]*m[p]*r[I,pulley]^2+Xd[3]*J[psi]*K[g,I]^2-m[p]*l[p]*Xd[4]*r[I,pulley]^2+m[p]*l[p]*X[4]^2*X[2]*r[I,pulley]^2)/r[I,pulley]^2 = eta[g,I]*K[g,I]*eta[m,I]*K[t,I]*U[1]/r..." />
<br />
<img src="images/3-DOF Crane Jib Equations77.gif" width="364" height="59" alt="[(Xd[3]*m[trolley]*r[I,pulley]^2+Xd[3]*m[p]*r[I,pulley]^2+Xd[3]*J[psi]*K[g,I]^2-m[p]*l[p]*Xd[4]*r[I,pulley]^2+m[p]*l[p]*X[4]^2*X[2]*r[I,pulley]^2)/r[I,pulley]^2 = eta[g,I]*K[g,I]*eta[m,I]*K[t,I]*U[1]/r..." />
</p>
<p align="left">
</p>
</dl><dl><a name="MapleAutoBookmark16" />
<p align="left">
<b><font color="#000000" size="4">Additional Insight: Inertia (or mass) Matrix: Fi</font></b>
</p>
<p align="left">
<font color="#000000">The nonlinear system of equations resulting from the Lagrangian mechanics can be written in the following matrix form:</font>
</p>
<p align="left">
<font color="#000000">F( q ) . qdd + G( q, qd ) . qd + H( q ) . q = L( q, qd, u )</font>
</p>
<p align="left">
<font color="#000000">F, G, and H are called, respectively, the mass, damping, and stiffness matrices.</font>
</p>
<p align="left">
<font color="#000000">They are symmetric in form.</font>
</p>
<p align="left">
<font color="#000000">The inertia (a.k.a. mass) matrix, F, gives indications regarding the coupling existing in the system.</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">Fi := Matrix( Nq, Nq ):</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">for i from 1 to Nq do<br />
&nbsp;&nbsp;for k from 1 to Nq do<br />
&nbsp;&nbsp;&nbsp;&nbsp;Fi[ i, k ] := simplify( diff( op( 1, EOM_states[i] ), Xd[k+Nq] ) );<br />
&nbsp;&nbsp;&nbsp;&nbsp;Fi[ i, k ] := collect( combine( Fi[ i, k ], trig ), cos );<br />
&nbsp;&nbsp;end do;<br />
end do:</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">'F[i]' = Fi;</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/3-DOF Crane Jib Equations78.gif" width="492" height="102" alt="F[i] = Matrix(%id = 474264)" />
</p>
<p align="left">
<font color="#000000">Linearization of the inertia matrix for small-displacements</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">Fi_lin := Matrix( Nq, Nq ):</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">for i from 1 to Nq do<br />
&nbsp;&nbsp;for k from 1 to Nq do<br />
&nbsp;&nbsp;&nbsp;&nbsp;Fi_lin[ i, k ] := Fi[ i, k ];<br />
&nbsp;&nbsp;&nbsp;&nbsp;Fi_lin[ i, k ] := convert( series( Fi_lin[ i, k ], X[ 2 ] ), polynom );<br />
&nbsp;&nbsp;&nbsp;&nbsp;Fi_lin[ i, k ] := subs( subs_XUzero, Fi_lin[ i, k ] );<br />
&nbsp;&nbsp;end do; <br />
end do:</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">'F_lin' = Fi_lin;</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/3-DOF Crane Jib Equations79.gif" width="486" height="102" alt="F_lin = Matrix(%id = 627100)" />
</p>
</dl></dl><dl><a name="MapleAutoBookmark17" />
<p align="left">
<b><font color="#000000" size="5">Solving the Euler-Lagrange's Equations</font></b>
</p>
<p align="left">
<font color="#000000">To solve the Euler-Lagrange's equations, they need to be linear.</font>
</p>
<dl><a name="MapleAutoBookmark18" />
<p align="left">
<b><font color="#000000" size="4">Reverse State Substitution for Pretty Display of the Solved EOM's</font></b>
</p>
<p align="left">
<font color="#000000">only for pretty print</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">subs_Xq_rev := { seq( X[i] = q[i], i=1..Nq ) }:<br />
subs_Xqd_rev := { seq( X[i+Nq] = qd[i], i=1..Nq ) }:</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">subs_U_rev := { U[1] = I[m,j] }: <br />
#subs_U_rev := { U[1] = F[j] }:</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">eom_collect_list := { seq( diff( q[i], t ), i=1..Nq ), seq( q[i], i=1..Nq ), J[psi], J[gamma] };</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/3-DOF Crane Jib Equations80.gif" width="382" height="45" alt="eom_collect_list := {x[I](t), gamma(t), diff(x[I](t),t), diff(gamma(t),t), J[psi], J[gamma]}" />
</p>
</dl><dl><a name="MapleAutoBookmark19" />
<p align="left">
<b><font color="#000000" size="4">Solution to the Non-Linear Equations of Motion</font></b>
</p>
<p align="left">
<font color="#000000">Solve the non-linear form of the equations of motion for the states' second time derivatives</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">Xqdd_solset_nl := solve( convert( EOM_states, set ), convert( Xqdd, set ) ):</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">assign( Xqdd_solset_nl );</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">for i from 1 to Nq do <br />
&nbsp;&nbsp;Xd_nl[i+Nq] := simplify( Xd[i+Nq] ):<br />
&nbsp;&nbsp;unassign( 'Xd[i+Nq]' ):<br />
end do:</font></b>
</td></tr>
</table>
</p>
<p align="left">
<font color="#000000">pretty display w.r.t. the named system states</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">for i from 1 to Nq do<br />
&nbsp;&nbsp;Xd_nl[i+Nq] := simplify( subs( subs_U_rev, subs_Xq_rev, subs_Xqd_rev, Xd_nl[i+Nq] ) ):<br />
end do:</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">for i from 1 to Nq do<br />
&nbsp;&nbsp;diff( qd[i], t ) = collect( Xd_nl[i+Nq], eom_collect_list );<br />
end do;</font></b>
</td></tr>
</table>
</p>
<p align="left">
<img src="images/3-DOF Crane Jib Equations81.gif" width="646" height="67" alt="diff(x[I](t),`$`(t,2)) = r[I,pulley]*(J[gamma]*r[I,pulley]*m[p]*l[p]*sin(gamma(t))+m[p]^2*l[p]^3*r[I,pulley]*sin(gamma(t)))/((-K[g,I]^2*m[p]*l[p]^2-J[gamma]*K[g,I]^2)*J[psi]+(-m[trolley]*r[I,pulley]^2-..." />
<br />
<img src="images/3-DOF Crane Jib Equations82.gif" width="516" height="29" alt="diff(x[I](t),`$`(t,2)) = r[I,pulley]*(J[gamma]*r[I,pulley]*m[p]*l[p]*sin(gamma(t))+m[p]^2*l[p]^3*r[I,pulley]*sin(gamma(t)))/((-K[g,I]^2*m[p]*l[p]^2-J[gamma]*K[g,I]^2)*J[psi]+(-m[trolley]*r[I,pulley]^2-..." />
<br />
<img src="images/3-DOF Crane Jib Equations83.gif" width="651" height="36" alt="diff(x[I](t),`$`(t,2)) = r[I,pulley]*(J[gamma]*r[I,pulley]*m[p]*l[p]*sin(gamma(t))+m[p]^2*l[p]^3*r[I,pulley]*sin(gamma(t)))/((-K[g,I]^2*m[p]*l[p]^2-J[gamma]*K[g,I]^2)*J[psi]+(-m[trolley]*r[I,pulley]^2-..." />
<br />
<img src="images/3-DOF Crane Jib Equations84.gif" width="507" height="29" alt="diff(x[I](t),`$`(t,2)) = r[I,pulley]*(J[gamma]*r[I,pulley]*m[p]*l[p]*sin(gamma(t))+m[p]^2*l[p]^3*r[I,pulley]*sin(gamma(t)))/((-K[g,I]^2*m[p]*l[p]^2-J[gamma]*K[g,I]^2)*J[psi]+(-m[trolley]*r[I,pulley]^2-..." />
<br />
<img src="images/3-DOF Crane Jib Equations85.gif" width="479" height="31" alt="diff(x[I](t),`$`(t,2)) = r[I,pulley]*(J[gamma]*r[I,pulley]*m[p]*l[p]*sin(gamma(t))+m[p]^2*l[p]^3*r[I,pulley]*sin(gamma(t)))/((-K[g,I]^2*m[p]*l[p]^2-J[gamma]*K[g,I]^2)*J[psi]+(-m[trolley]*r[I,pulley]^2-..." />
<br />
<img src="images/3-DOF Crane Jib Equations86.gif" width="634" height="29" alt="diff(x[I](t),`$`(t,2)) = r[I,pulley]*(J[gamma]*r[I,pulley]*m[p]*l[p]*sin(gamma(t))+m[p]^2*l[p]^3*r[I,pulley]*sin(gamma(t)))/((-K[g,I]^2*m[p]*l[p]^2-J[gamma]*K[g,I]^2)*J[psi]+(-m[trolley]*r[I,pulley]^2-..." />
<br />
<img src="images/3-DOF Crane Jib Equations87.gif" width="238" height="36" alt="diff(x[I](t),`$`(t,2)) = r[I,pulley]*(J[gamma]*r[I,pulley]*m[p]*l[p]*sin(gamma(t))+m[p]^2*l[p]^3*r[I,pulley]*sin(gamma(t)))/((-K[g,I]^2*m[p]*l[p]^2-J[gamma]*K[g,I]^2)*J[psi]+(-m[trolley]*r[I,pulley]^2-..." />
</p>
<p align="left">
<img src="images/3-DOF Crane Jib Equations88.gif" width="447" height="67" alt="diff(gamma(t),`$`(t,2)) = m[p]^2*l[p]^2*r[I,pulley]^2*cos(gamma(t))*sin(gamma(t))/((-K[g,I]^2*m[p]*l[p]^2-J[gamma]*K[g,I]^2)*J[psi]+(-m[trolley]*r[I,pulley]^2-m[p]*r[I,pulley]^2)*J[gamma]-m[trolley]*r[..." />
<br />
<img src="images/3-DOF Crane Jib Equations89.gif" width="516" height="29" alt="diff(gamma(t),`$`(t,2)) = m[p]^2*l[p]^2*r[I,pulley]^2*cos(gamma(t))*sin(gamma(t))/((-K[g,I]^2*m[p]*l[p]^2-J[gamma]*K[g,I]^2)*J[psi]+(-m[trolley]*r[I,pulley]^2-m[p]*r[I,pulley]^2)*J[gamma]-m[trolley]*r[..." />
<br />
<img src="images/3-DOF Crane Jib Equations90.gif" width="630" height="36" alt="diff(gamma(t),`$`(t,2)) = m[p]^2*l[p]^2*r[I,pulley]^2*cos(gamma(t))*sin(gamma(t))/((-K[g,I]^2*m[p]*l[p]^2-J[gamma]*K[g,I]^2)*J[psi]+(-m[trolley]*r[I,pulley]^2-m[p]*r[I,pulley]^2)*J[gamma]-m[trolley]*r[..." />
<br />
<img src="images/3-DOF Crane Jib Equations91.gif" width="543" height="29" alt="diff(gamma(t),`$`(t,2)) = m[p]^2*l[p]^2*r[I,pulley]^2*cos(gamma(t))*sin(gamma(t))/((-K[g,I]^2*m[p]*l[p]^2-J[gamma]*K[g,I]^2)*J[psi]+(-m[trolley]*r[I,pulley]^2-m[p]*r[I,pulley]^2)*J[gamma]-m[trolley]*r[..." />
<br />
<img src="images/3-DOF Crane Jib Equations92.gif" width="587" height="31" alt="diff(gamma(t),`$`(t,2)) = m[p]^2*l[p]^2*r[I,pulley]^2*cos(gamma(t))*sin(gamma(t))/((-K[g,I]^2*m[p]*l[p]^2-J[gamma]*K[g,I]^2)*J[psi]+(-m[trolley]*r[I,pulley]^2-m[p]*r[I,pulley]^2)*J[gamma]-m[trolley]*r[..." />
<br />
<img src="images/3-DOF Crane Jib Equations93.gif" width="634" height="29" alt="diff(gamma(t),`$`(t,2)) = m[p]^2*l[p]^2*r[I,pulley]^2*cos(gamma(t))*sin(gamma(t))/((-K[g,I]^2*m[p]*l[p]^2-J[gamma]*K[g,I]^2)*J[psi]+(-m[trolley]*r[I,pulley]^2-m[p]*r[I,pulley]^2)*J[gamma]-m[trolley]*r[..." />
<br />
<img src="images/3-DOF Crane Jib Equations94.gif" width="238" height="36" alt="diff(gamma(t),`$`(t,2)) = m[p]^2*l[p]^2*r[I,pulley]^2*cos(gamma(t))*sin(gamma(t))/((-K[g,I]^2*m[p]*l[p]^2-J[gamma]*K[g,I]^2)*J[psi]+(-m[trolley]*r[I,pulley]^2-m[p]*r[I,pulley]^2)*J[gamma]-m[trolley]*r[..." />
</p>
</dl><dl><a name="MapleAutoBookmark20" />
<p align="left">
<b><font color="#000000" size="4">Solution to the Linearized EOM's</font></b>
</p>
<p align="left">
<font color="#000000">Solve the linear form of the equations of motion for the states' second time derivatives</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">Xqdd_solset_ser := solve( convert( EOM_ser, set ), convert( Xqdd, set ) ):</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">assign( Xqdd_solset_ser );</font></b>
</td></tr>
</table>
</p>
<p align="left">
<font color="#000000">Moreover, for small angles</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">subs_avsq_list := { X[Nq+2]^2 = 0 }:</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">for i from 1 to Nq do<br />
&nbsp;&nbsp;Xd[i+Nq] := subs( subs_avsq_list, Xd[i+Nq] );<br />
end:</font></b>
</td></tr>
</table>
</p>
<p align="left">
<font color="#000000">pretty display w.r.t. the named system states</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">for i from 1 to Nq do<br />
&nbsp;&nbsp;diff( qd[i], t ) = collect( subs( subs_U_rev, subs_Xq_rev, subs_Xqd_rev, Xd[i+Nq] ), eom_collect_list );<br />
end do;<br />
</font></b>
</td></tr>
</table>
</p>
<p align="left">
<img src="images/3-DOF Crane Jib Equations95.gif" width="509" height="63" alt="diff(x[I](t),`$`(t,2)) = -g*m[p]^2*l[p]^2*r[I,pulley]^2/((K[g,I]^2*m[p]*l[p]^2+J[gamma]*K[g,I]^2)*J[psi]+(m[trolley]*r[I,pulley]^2+m[p]*r[I,pulley]^2)*J[gamma]+m[trolley]*r[I,pulley]^2*m[p]*l[p]^2)*gam..." />
<br />
<img src="images/3-DOF Crane Jib Equations96.gif" width="565" height="29" alt="diff(x[I](t),`$`(t,2)) = -g*m[p]^2*l[p]^2*r[I,pulley]^2/((K[g,I]^2*m[p]*l[p]^2+J[gamma]*K[g,I]^2)*J[psi]+(m[trolley]*r[I,pulley]^2+m[p]*r[I,pulley]^2)*J[gamma]+m[trolley]*r[I,pulley]^2*m[p]*l[p]^2)*gam..." />
<br />
<img src="images/3-DOF Crane Jib Equations97.gif" width="503" height="31" alt="diff(x[I](t),`$`(t,2)) = -g*m[p]^2*l[p]^2*r[I,pulley]^2/((K[g,I]^2*m[p]*l[p]^2+J[gamma]*K[g,I]^2)*J[psi]+(m[trolley]*r[I,pulley]^2+m[p]*r[I,pulley]^2)*J[gamma]+m[trolley]*r[I,pulley]^2*m[p]*l[p]^2)*gam..." />
<br />
<img src="images/3-DOF Crane Jib Equations98.gif" width="498" height="29" alt="diff(x[I](t),`$`(t,2)) = -g*m[p]^2*l[p]^2*r[I,pulley]^2/((K[g,I]^2*m[p]*l[p]^2+J[gamma]*K[g,I]^2)*J[psi]+(m[trolley]*r[I,pulley]^2+m[p]*r[I,pulley]^2)*J[gamma]+m[trolley]*r[I,pulley]^2*m[p]*l[p]^2)*gam..." />
<br />
<img src="images/3-DOF Crane Jib Equations99.gif" width="212" height="29" alt="diff(x[I](t),`$`(t,2)) = -g*m[p]^2*l[p]^2*r[I,pulley]^2/((K[g,I]^2*m[p]*l[p]^2+J[gamma]*K[g,I]^2)*J[psi]+(m[trolley]*r[I,pulley]^2+m[p]*r[I,pulley]^2)*J[gamma]+m[trolley]*r[I,pulley]^2*m[p]*l[p]^2)*gam..." />
</p>
<p align="left">
<img src="images/3-DOF Crane Jib Equations100.gif" width="563" height="63" alt="diff(gamma(t),`$`(t,2)) = -m[p]*l[p]*(m[p]*r[I,pulley]^2*g+m[trolley]*r[I,pulley]^2*g+g*K[g,I]^2*J[psi])/((K[g,I]^2*m[p]*l[p]^2+J[gamma]*K[g,I]^2)*J[psi]+(m[trolley]*r[I,pulley]^2+m[p]*r[I,pulley]^2)*J..." />
<br />
<img src="images/3-DOF Crane Jib Equations101.gif" width="498" height="29" alt="diff(gamma(t),`$`(t,2)) = -m[p]*l[p]*(m[p]*r[I,pulley]^2*g+m[trolley]*r[I,pulley]^2*g+g*K[g,I]^2*J[psi])/((K[g,I]^2*m[p]*l[p]^2+J[gamma]*K[g,I]^2)*J[psi]+(m[trolley]*r[I,pulley]^2+m[p]*r[I,pulley]^2)*J..." />
<br />
<img src="images/3-DOF Crane Jib Equations102.gif" width="535" height="30" alt="diff(gamma(t),`$`(t,2)) = -m[p]*l[p]*(m[p]*r[I,pulley]^2*g+m[trolley]*r[I,pulley]^2*g+g*K[g,I]^2*J[psi])/((K[g,I]^2*m[p]*l[p]^2+J[gamma]*K[g,I]^2)*J[psi]+(m[trolley]*r[I,pulley]^2+m[p]*r[I,pulley]^2)*J..." />
<br />
<img src="images/3-DOF Crane Jib Equations103.gif" width="498" height="29" alt="diff(gamma(t),`$`(t,2)) = -m[p]*l[p]*(m[p]*r[I,pulley]^2*g+m[trolley]*r[I,pulley]^2*g+g*K[g,I]^2*J[psi])/((K[g,I]^2*m[p]*l[p]^2+J[gamma]*K[g,I]^2)*J[psi]+(m[trolley]*r[I,pulley]^2+m[p]*r[I,pulley]^2)*J..." />
<br />
<img src="images/3-DOF Crane Jib Equations104.gif" width="212" height="29" alt="diff(gamma(t),`$`(t,2)) = -m[p]*l[p]*(m[p]*r[I,pulley]^2*g+m[trolley]*r[I,pulley]^2*g+g*K[g,I]^2*J[psi])/((K[g,I]^2*m[p]*l[p]^2+J[gamma]*K[g,I]^2)*J[psi]+(m[trolley]*r[I,pulley]^2+m[p]*r[I,pulley]^2)*J..." />
</p>
</dl></dl><dl><a name="MapleAutoBookmark21" />
<p align="left">
<b><font color="#000000" size="5">Determine the System State-Space Matrices: A, B, C, and D</font></b>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">A_ss := Matrix( Nx, Nx ):</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">A_ss := deriveA( Xqdd, A_ss, Nq, subs_XUzero ): 'A' = A_ss;</font></b>
</td></tr>
</table>
</p>
<p align="left">
<img src="images/3-DOF Crane Jib Equations105.gif" width="43" height="20" alt="A = Matrix(%id = 591292)" />
<br />
<img src="images/3-DOF Crane Jib Equations106.gif" width="98" height="20" alt="A = Matrix(%id = 591292)" />
<br />
<img src="images/3-DOF Crane Jib Equations107.gif" width="98" height="20" alt="A = Matrix(%id = 591292)" />
<br />
<img src="images/3-DOF Crane Jib Equations108.gif" width="558" height="31" alt="A = Matrix(%id = 591292)" />
<br />
<img src="images/3-DOF Crane Jib Equations109.gif" width="424" height="29" alt="A = Matrix(%id = 591292)" />
<br />
<img src="images/3-DOF Crane Jib Equations110.gif" width="641" height="31" alt="A = Matrix(%id = 591292)" />
<br />
<img src="images/3-DOF Crane Jib Equations111.gif" width="582" height="29" alt="A = Matrix(%id = 591292)" />
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">#lprint( A_ss );</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">B_ss := Matrix( Nx, Nu ):</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">B_ss := deriveB( Xqdd, B_ss, Nq, subs_XUzero ): 'B' = B_ss;</font></b>
</td></tr>
</table>
</p>
<p align="left">
<img src="images/3-DOF Crane Jib Equations112.gif" width="42" height="20" alt="B = Matrix(%id = 652588)" />
<br />
<img src="images/3-DOF Crane Jib Equations113.gif" width="38" height="20" alt="B = Matrix(%id = 652588)" />
<br />
<img src="images/3-DOF Crane Jib Equations114.gif" width="38" height="20" alt="B = Matrix(%id = 652588)" />
<br />
<img src="images/3-DOF Crane Jib Equations115.gif" width="525" height="31" alt="B = Matrix(%id = 652588)" />
<br />
<img src="images/3-DOF Crane Jib Equations116.gif" width="542" height="29" alt="B = Matrix(%id = 652588)" />
<br />
<img src="images/3-DOF Crane Jib Equations117.gif" width="627" height="30" alt="B = Matrix(%id = 652588)" />
<br />
<img src="images/3-DOF Crane Jib Equations118.gif" width="384" height="29" alt="B = Matrix(%id = 652588)" />
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">#lprint( B_ss );</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">C_ss := IdentityMatrix( Ny, Nx );</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/3-DOF Crane Jib Equations119.gif" width="179" height="50" alt="C_ss := Matrix(%id = 716260)" />
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">#lprint( C_ss );</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">D_ss := Matrix( Ny, Nu, 0 );</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/3-DOF Crane Jib Equations120.gif" width="104" height="50" alt="D_ss := Matrix(%id = 802708)" />
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">#lprint( D_ss );</font></b>
</td></tr>
</table>
</p>
<p align="left">
</p>
</dl><p align="left">
</p>
<dl><a name="MapleAutoBookmark22" />
<p align="left">
<b><font color="#000000" size="5">Write A, B, C, and D to a Matlab file</font></b>
</p>
<p align="left">
<font color="#000000">Save the state-space matrices A, B, C and D to a MATLAB file.</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">Matlab_File_Name := "CRANE_JIB_ABCD_eqns.m":</font></b>
</td></tr>
</table>
</p>
<p align="left">
<font color="#000000">substitution set containing a notation consistent with that used in the MATLAB design script(s)</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">Matlab_Notations := { m[p] = mp, l[p] = lp, m[trolley] = m_trolley, J[psi] = J_psi, J[gamma] = J_gamma, K[t,j] = Kt_j, eta[m,j] = eff_m_j, K[g,j] = Kg_j, eta[g,j] = eff_g_j, r[j,pulley] = r_j_pulley, B[psi] = B_psi, B[gamma] = B_gamma }:</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">Experiment_Name := "3D CRANE TROLLEY/PENDULUM MODEL":</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">write_ABCD_to_Mfile( Matlab_File_Name, Experiment_Name, Matlab_Notations, A_ss, B_ss, C_ss, D_ss );</font></b>
</td></tr>
</table>
</p>
</dl><dl><a name="MapleAutoBookmark23" />
<p align="left">
<b><font color="#000000" size="5">Procedure Printing</font></b>
</p>
<p align="left">
<font color="#000000">default:</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">#interface( verboseproc = 1 );</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">eval( lagrange_equations ):</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"></td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"></td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"></td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"></td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"></td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"></td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"></td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"></td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"></td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"></td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"></td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"></td></tr>
</table>
</p>
</dl><p align="left">
<a href="3-DOF Crane Jib Equations1.html#Description" target="Content">Click here to go back to top: Description Section</a><font color="#000000">.</font>
</p>
</basefont>
</body>
</html>
